<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.136.0"><meta name=generator content="Relearn 7.0.1+72a875f1db967152c77914cff4d53f8fcee0e619"><meta name=description content="I prefer the easy-routes library than pure Hunchentoot to define routes, as we did in the tutorial, so skip to its section below if you want. However, it can only be benificial to know the built-in Hunchentoot ways.
Info Please see the tutorial where we define routes with path parameters and where we also access URL parameters.
Hunchentoot The dispatch table The first, most basic way in Hunchentoot to create a route is to add a URL -> function association in its â€œprefix dispatchâ€ table."><meta name=author content="vindarel"><meta name=twitter:card content="summary"><meta name=twitter:title content="Routes and URL parameters :: Web Apps in Lisp: Know-how"><meta name=twitter:description content="I prefer the easy-routes library than pure Hunchentoot to define routes, as we did in the tutorial, so skip to its section below if you want. However, it can only be benificial to know the built-in Hunchentoot ways.
Info Please see the tutorial where we define routes with path parameters and where we also access URL parameters.
Hunchentoot The dispatch table The first, most basic way in Hunchentoot to create a route is to add a URL -> function association in its â€œprefix dispatchâ€ table."><meta property="og:url" content="http://example.org/building-blocks/routing/index.html"><meta property="og:site_name" content="Web Apps in Lisp: Know-how"><meta property="og:title" content="Routes and URL parameters :: Web Apps in Lisp: Know-how"><meta property="og:description" content="I prefer the easy-routes library than pure Hunchentoot to define routes, as we did in the tutorial, so skip to its section below if you want. However, it can only be benificial to know the built-in Hunchentoot ways.
Info Please see the tutorial where we define routes with path parameters and where we also access URL parameters.
Hunchentoot The dispatch table The first, most basic way in Hunchentoot to create a route is to add a URL -> function association in its â€œprefix dispatchâ€ table."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Building blocks"><meta itemprop=name content="Routes and URL parameters :: Web Apps in Lisp: Know-how"><meta itemprop=description content="I prefer the easy-routes library than pure Hunchentoot to define routes, as we did in the tutorial, so skip to its section below if you want. However, it can only be benificial to know the built-in Hunchentoot ways.
Info Please see the tutorial where we define routes with path parameters and where we also access URL parameters.
Hunchentoot The dispatch table The first, most basic way in Hunchentoot to create a route is to add a URL -> function association in its â€œprefix dispatchâ€ table."><meta itemprop=wordCount content="1362"><title>Routes and URL parameters :: Web Apps in Lisp: Know-how</title>
<link href=/building-blocks/routing/index.xml rel=alternate type=application/rss+xml title="Routes and URL parameters :: Web Apps in Lisp: Know-how"><link href=/css/fontawesome-all.min.css?1736462513 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css?1736462513 rel=stylesheet></noscript><link href=/css/nucleus.css?1736462513 rel=stylesheet><link href=/css/auto-complete.css?1736462513 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/auto-complete.css?1736462513 rel=stylesheet></noscript><link href=/css/perfect-scrollbar.min.css?1736462513 rel=stylesheet><link href=/css/fonts.css?1736462513 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css?1736462513 rel=stylesheet></noscript><link href=/css/theme.css?1736462513 rel=stylesheet><link href=/css/theme-auto.css?1736462513 rel=stylesheet id=R-variant-style><link href=/css/chroma-auto.css?1736462513 rel=stylesheet id=R-variant-chroma-style><link href=/css/print.css?1736462513 rel=stylesheet media=print><script src=/js/variant.js?1736462513></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="http://example.org",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.variants&&variants.init(["auto"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script></head><body class="mobile-support html" data-url=/building-blocks/routing/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#hunchentoot>Hunchentoot</a><ul><li><a href=#the-dispatch-table>The dispatch table</a></li><li><a href=#easy-handlers>Easy handlers</a></li></ul></li><li><a href=#easy-routes>Easy-routes</a><ul><li><a href=#easy-routes-decorators>easy-routes&rsquo; decorators</a></li></ul></li><li><a href=#accessing-get-and-post-parameters>Accessing GET and POST parameters</a><ul><li><a href=#hunchentoot-and-easy-routes-url-parameters>Hunchentoot and easy-routes URL parameters</a></li></ul></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/building-blocks/index.html><span itemprop=name>Building blocks</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Routes and URL parameters</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/building-blocks/static/index.html title="Static assets (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/building-blocks/templates/index.html title="Templates (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable building-blocks" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=routes-and-url-parameters>Routes and URL parameters</h1><p>I prefer the easy-routes library than pure Hunchentoot to define
routes, as we did in the tutorial, so skip to its section below if you
want. However, it can only be benificial to know the built-in
Hunchentoot ways.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>Please see the tutorial where we define routes with <strong>path parameters</strong>
and where we also access <strong>URL parameters</strong>.</p></div></div><h2 id=hunchentoot>Hunchentoot</h2><h3 id=the-dispatch-table>The dispatch table</h3><p>The first, most basic way in Hunchentoot to create a route is to add a
URL -> function association in its &ldquo;prefix dispatch&rdquo; table.</p><p>To bind an existing function to a route, we create a &ldquo;prefix dispatch&rdquo;
that we push onto the <code>*dispatch-table*</code> list:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(defun hello ()
</span></span><span style=display:flex><span>   (<span style=color:#a6e22e>format</span> <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#34;Hello, it works!&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(push
</span></span><span style=display:flex><span>  (hunchentoot:create-prefix-dispatcher <span style=color:#e6db74>&#34;/hello&#34;</span> <span style=color:#a6e22e>#&#39;</span>hello)
</span></span><span style=display:flex><span>  hunchentoot:*dispatch-table*)</span></span></code></pre></div><p>You just created the <code>/hello</code> route.</p><p>To create a route with a regexp, we use <code>create-regex-dispatcher</code>, where
the url-as-regexp can be a string, an s-expression or a cl-ppcre scanner.</p><p>If you didn&rsquo;t already, create an acceptor and start the server:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(defvar *server* (<span style=color:#a6e22e>make-instance</span> <span style=color:#e6db74>&#39;hunchentoot:easy-acceptor</span> <span style=color:#e6db74>:port</span> <span style=color:#ae81ff>4242</span>))
</span></span><span style=display:flex><span>(hunchentoot:start *server*)</span></span></code></pre></div><p>and access it on <a href=http://localhost:4242/hello.html rel=external target=_blank>http://localhost:4242/hello.html</a>.</p><p>We can see logs on the REPL:</p><div class="highlight wrap-code"><pre tabindex=0><code>127.0.0.1 - [2018-10-27 23:50:09] &#34;get / http/1.1&#34; 200 393 &#34;-&#34; &#34;Mozilla/5.0 (X11; Linux x86_64; rv:58.0) Gecko/20100101 Firefox/58.0&#34;
127.0.0.1 - [2018-10-27 23:50:10] &#34;get /img/made-with-lisp-logo.jpg http/1.1&#34; 200 12583 &#34;http://localhost:4242/&#34; &#34;Mozilla/5.0 (X11; Linux x86_64; rv:58.0) Gecko/20100101 Firefox/58.0&#34;
127.0.0.1 - [2018-10-27 23:50:10] &#34;get /favicon.ico http/1.1&#34; 200 1406 &#34;-&#34; &#34;Mozilla/5.0 (X11; Linux x86_64; rv:58.0) Gecko/20100101 Firefox/58.0&#34;
127.0.0.1 - [2018-10-27 23:50:19] &#34;get /hello.html http/1.1&#34; 200 20 &#34;-&#34; &#34;Mozilla/5.0 (X11; Linux x86_64; rv:58.0) Gecko/20100101 Firefox/58.0&#34;</code></pre></div><h3 id=easy-handlers>Easy handlers</h3><p>The second way to create a route is to use the &ldquo;easy handlers&rdquo;.</p><p><a href=https://edicl.github.io/hunchentoot/#define-easy-handler rel=external target=_blank>define-easy-handler</a> allows to create a function and to bind it to an uri at once.</p><p>Its form follows</p><pre><code>define-easy-handler (function-name :uri &lt;the uri&gt; â€¦) (parameters as a list)
</code></pre><p>where <code>&lt;the uri></code> can be a string or a function.</p><p>Example:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(hunchentoot:define-easy-handler (say-yo <span style=color:#e6db74>:uri</span> <span style=color:#e6db74>&#34;/yo&#34;</span>) (name)
</span></span><span style=display:flex><span>  (setf (hunchentoot:content-type*) <span style=color:#e6db74>&#34;text/plain&#34;</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>format</span> <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#34;Hey~@[ ~A~]!&#34;</span> name))</span></span></code></pre></div><p>Visit it at <a href=http://localhost:4242/yo rel=external target=_blank>p://localhost:4242/yo</a> and add parameters on the url:
<a href="http://localhost:4242/yo?name=Alice" rel=external target=_blank>http://localhost:4242/yo?name=Alice</a>.</p><p>Just a thoughtâ€¦ we didn&rsquo;t explicitly ask Hunchentoot to add this
route to our first acceptor of the port 4242. Let&rsquo;s try another acceptor (see
previous section), on port 4444: <a href="http://localhost:4444/yo?name=Bob" rel=external target=_blank>http://localhost:4444/yo?name=Bob</a> It
works too! Our route was configured for the two &ldquo;acceptors&rdquo;, the two web apps.
In fact, <code>define-easy-handler</code> accepts an <code>acceptor-names</code>
parameter. If you are only working one web app, that&rsquo;s OK. If you want to create the
route for one app only though, you&rsquo;ll have to use this parameter:</p><blockquote><p>acceptor-names (which is evaluated) can be a list of symbols which means that the handler will only be returned by DISPATCH-EASY-HANDLERS in acceptors which have one of these names (see ACCEPTOR-NAME). acceptor-names can also be the symbol T which means that the handler will be returned by DISPATCH-EASY-HANDLERS in every acceptor.</p></blockquote><p>So, <code>define-easy-handler</code> has the following signature:</p><pre><code>define-easy-handler (function-name &amp;key uri acceptor-names default-request-type) (lambda list parameters)
</code></pre><p>It also has a <code>default-parameter-type</code> which we&rsquo;ll use in a minute to get url parameters.</p><p>There are also keys to know for the lambda list. Please see the documentation.</p><h2 id=easy-routes>Easy-routes</h2><p><a href=https://github.com/mmontone/easy-routes rel=external target=_blank>easy-routes</a> is a route
handling extension on top of Hunchentoot. It provides:</p><ul><li>dispatch based on HTTP method (otherwise cumbersome in Hunchentoot)</li><li>arguments extraction from the url path</li><li>and decorators, which help for wrapping the route with more logic (ensure a user is logged in, define the request content typeâ€¦).</li></ul><p>I prefer it to raw Hunchentoot, it is simpler to use.</p><p>To use it, don&rsquo;t create a server with <code>hunchentoot:easy-acceptor</code> but
with <code>easy-routes:easy-routes-aceptor</code>:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(setf *server* (<span style=color:#a6e22e>make-instance</span> <span style=color:#e6db74>&#39;easy-routes:easy-routes-acceptor</span>))</span></span></code></pre></div><blockquote><p>Note: there is also <code>routes-acceptor</code>. The difference is that <code>easy-routes-acceptor</code> iterates over Hunchentoot&rsquo;s <code>*dispatch-table*</code> if no route is found by <code>easy-routes</code>. That allows us, for example, to serve static content the usual way with Hunchentoot.</p></blockquote><p>Then define a route like this:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(easy-routes:defroute name (<span style=color:#e6db74>&#34;/tasks/:id&#34;</span> <span style=color:#e6db74>:method</span> <span style=color:#e6db74>:get</span>) (debug &amp;get z)
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>format</span> <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#34;we want the task of id: ~a with parameters debug: ~a and z: ~a&#34;</span> id debug z))</span></span></code></pre></div><p>You can try it on routes like <code>/tasks/33?debug=t&amp;z=abc</code>.</p><p>Here, <code>:id</code> captures the path parameter and binds it to the <code>id</code>
variable into the route body. <code>debug</code> and <code>&amp;get z</code> define url parameters.
With a <code>:post</code> request, we could define <code>&amp;post</code> parameters to extract from the HTTP request
body.</p><p>These parameters can take an <code>:init-form</code> and <code>:parameter-type</code>
options as in <code>define-easy-handler</code>. The init form gives a default
value if the argument is not supplied, and the parameter type asks
Hunchentoot to convert the argument to this given type. For example,
defining an <code>:integer</code> will give you an integer and not a string (all
URL parameters are given as a string by default, but more on that on the next section).</p><h3 id=easy-routes-decorators>easy-routes&rsquo; decorators</h3><p><code>easy-routes</code> provides us with an easy way to call any function before
the route body. Following the naming of a popular language, they are
called &ldquo;decorators&rdquo;.</p><p>In the end route definitions are only functions, right? Decorators are
only functions too, but they are run before the route body.</p><p>Remember the shape of our routes:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(easy-routes:defroute root (<span style=color:#e6db74>&#34;/&#34;</span>) ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;hello app&#34;</span>)</span></span></code></pre></div><p>We add a list of decorators after the <code>"/"</code> part, like this:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span> (defroute my-protected-route (<span style=color:#e6db74>&#34;/foo&#34;</span> <span style=color:#e6db74>:method</span> <span style=color:#e6db74>:get</span>
</span></span><span style=display:flex><span>                                      <span style=color:#e6db74>:decorators</span> ((@json))) ()
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;hello decorated route&#34;</span>)</span></span></code></pre></div><p>but what is <code>@json</code>? It&rsquo;s a function:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(defun @json (next)
</span></span><span style=display:flex><span>  (setf (hunchentoot:content-type*) <span style=color:#e6db74>&#34;application/json&#34;</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>funcall</span> next))</span></span></code></pre></div><p>You can ignore the <code>@</code> sign, it doesn&rsquo;t mean anything in Common Lisp
(but as it&rsquo;s part of the function name it can help you reference all
your route decorators).</p><p>Route &ldquo;decorators&rdquo; must accept at least one argument: here called <code>next</code>, it is the
function that will be called next (so, at one point, our route body)
<em>if we want to</em>. Look at <code>(funcall next)</code>: our decorator correctly
calls it.</p><p>If you declare a list of decorators, calling &ldquo;next&rdquo; will get you
through the chain of decorator functions, and finally to the route
body (if no &ldquo;decorator&rdquo; exited before).</p><p>So what it is function doing? Keep it mind that it is called in the
context of a web request. So we can call <code>hunchentoot:content-type*</code>
(note the <code>*</code>, this function is applied on the current web
request). We are setting this request&rsquo;s content-type to
<code>application/json</code>.</p><p>Yes, you can copy-paste the <code>setf</code> line directly into your function.</p><p>Here&rsquo;s another &ldquo;decorator&rdquo;:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(defun @auth (next)
</span></span><span style=display:flex><span>  (<span style=color:#66d9ef>let</span> ((user (hunchentoot:session-value <span style=color:#e6db74>&#39;user</span>)))
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>not</span> user)
</span></span><span style=display:flex><span>	  (hunchentoot:redirect <span style=color:#e6db74>&#34;/login&#34;</span>)
</span></span><span style=display:flex><span>	  (<span style=color:#a6e22e>funcall</span> next))))</span></span></code></pre></div><p>Now that&rsquo;s interesting. It&rsquo;s doing this:</p><ul><li>it gets a value from the current web session. This can be any Lisp object.</li><li>if a user was registered in the session, we call the <code>next</code> method to run other decorators and the route body</li><li>otherwise, we redirect to the login page.</li></ul><p>We use them in the &ldquo;User log in&rdquo; section.</p><p>Here&rsquo;s another decorator from easy-routes&rsquo; README:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span><span style=color:#75715e>;; Ensure our PostgreSQL database is connected:</span>
</span></span><span style=display:flex><span>(defun @db (next)
</span></span><span style=display:flex><span>  (postmodern:with-connection *db-spec*
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>funcall</span> next)))</span></span></code></pre></div><p>See the <code>easy-routes</code> readme for more.</p><h2 id=accessing-get-and-post-parameters>Accessing GET and POST parameters</h2><p>You probably have nothing to do to get the value of those parameters: if you defined your route with <code>easy-handler</code> or <code>easy-routes:defroute</code>, the URL parameters create local variables in the function body. Very much like the arguments of the <code>defun</code> macro.</p><p>However, here&rsquo;s how to interact more with URL parameters. In particular, we can define the default type of a parameter: they are strings by default, but we can ask to receive an integer.</p><h3 id=hunchentoot-and-easy-routes-url-parameters>Hunchentoot and easy-routes URL parameters</h3><p>First of all, note that we can access query parameters anytime with</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(hunchentoot:parameter <span style=color:#e6db74>&#34;my-param&#34;</span>)</span></span></code></pre></div><p>It acts on the default <code>*request*</code> object which is passed to all handlers.</p><p>There is also <code>get-parameter</code> and <code>post-parameter</code>.</p><p>Earlier we saw some key parameters to <code>define-easy-handler</code>. We now
introduce <code>default-parameter-type</code>.</p><p>We defined the following handler:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(hunchentoot:define-easy-handler (say-yo <span style=color:#e6db74>:uri</span> <span style=color:#e6db74>&#34;/yo&#34;</span>) (name)
</span></span><span style=display:flex><span>  (setf (hunchentoot:content-type*) <span style=color:#e6db74>&#34;text/plain&#34;</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>format</span> <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#34;Hey ~a!&#34;</span> name))</span></span></code></pre></div><p>The variable <code>name</code> is a string by default. Let&rsquo;s check it out:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(hunchentoot:define-easy-handler (say-yo <span style=color:#e6db74>:uri</span> <span style=color:#e6db74>&#34;/yo&#34;</span>) (name)
</span></span><span style=display:flex><span>  (setf (hunchentoot:content-type*) <span style=color:#e6db74>&#34;text/plain&#34;</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>format</span> <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#34;Hey ~a you are of type ~a&#34;</span> name (<span style=color:#a6e22e>type-of</span> name)))</span></span></code></pre></div><p>Going to <a href="http://localhost:4242/yo?name=Alice" rel=external target=_blank>http://localhost:4242/yo?name=Alice</a> returns</p><pre><code>Hey Alice you are of type (SIMPLE-ARRAY CHARACTER (5))
</code></pre><p>To automatically bind it to another type, we use <code>default-parameter-type</code>. It can be
one of those simple types:</p><ul><li><code>'string</code> (default),</li><li><code>'integer</code>,</li><li><code>'character</code> (accepting strings of length 1 only, otherwise it is nil)</li><li>or <code>'boolean</code></li></ul><p>or a compound list:</p><ul><li><code>'(:list &lt;type>)</code></li><li><code>'(:array &lt;type>)</code></li><li><code>'(:hash-table &lt;type>)</code></li></ul><p>where <code>&lt;type></code> is a simple type.</p><footer class=footline><hr><footer style=text-align:right;font-size:.8rem><div>A motivated Lisper, 2022-present. <a href=https://github.com/sponsors/vindarel/>Show your love!</a> â™¥</div><div><a href="https://www.udemy.com/course/common-lisp-programming/?referralCode=2F3D698BBC4326F94358">Learn Common Lisp efficiently in videos</a> ðŸŽ¥</div><script async defer data-domain=web-apps-in-lisp.github.io src=https://stats.documents.design/js/plausible.js></script></footer></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><style>#logo svg,#logo svg *{color:#282828;color:var(--MENU-SECTIONS-BG-color);fill:#282828!important;fill:var(--MENU-SECTIONS-BG-color)!important;opacity:.945}a#logo{color:#282828;color:var(--MENU-SECTIONS-BG-color);font-family:work sans,helvetica,tahoma,geneva,arial,sans-serif;font-size:30px;font-weight:300;margin-top:-13px;max-width:60%;text-transform:uppercase;width:226px;white-space:nowrap}a#logo:hover{color:#282828;color:var(--MENU-SECTIONS-BG-color)}#logo svg{margin-bottom:-20px;margin-left:-23.5px;width:40.5%}@media only all and (max-width:59.938em){a#logo{font-size:25px;margin-top:-3px}#logo svg{margin-bottom:-12px;margin-left:-23px}}@media all and (-ms-high-contrast:none){a#logo{margin-top:-58px}#logo svg{margin-bottom:-62px}}</style><a id=logo href=/>ðŸš€</a></div><script>window.index_js_url="/searchindex.js?1736462513"</script><search><form action=/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search><script>var contentLangs=["en"]</script><script src=/js/auto-complete.js?1736462513 defer></script><script src=/js/lunr/lunr.min.js?1736462513 defer></script><script src=/js/lunr/lunr.stemmer.support.min.js?1736462513 defer></script><script src=/js/lunr/lunr.multi.min.js?1736462513 defer></script><script src=/js/lunr/lunr.en.min.js?1736462513 defer></script><script src=/js/search.js?1736462513 defer></script></div><div id=R-homelinks class="default-animation homelinks"><ul><li><a class=padding href=/index.html><i class="fa-fw fas fa-home"></i> Home</a></li></ul><hr class=padding></div><div id=R-content-wrapper class=highlightable><div id=R-topics><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/tutorial/index.html><input type=checkbox id=R-section-5816d3986a56e91688f1baee8cddaed6 aria-controls=R-subsections-5816d3986a56e91688f1baee8cddaed6><label for=R-section-5816d3986a56e91688f1baee8cddaed6><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Tutorial part 1</span></label><a class=padding href=/tutorial/index.html>Tutorial part 1</a><ul id=R-subsections-5816d3986a56e91688f1baee8cddaed6 class=collapsible-menu><li data-nav-id=/tutorial/getting-started/index.html><a class=padding href=/tutorial/getting-started/index.html>Getting Started</a></li><li data-nav-id=/tutorial/first-route/index.html><a class=padding href=/tutorial/first-route/index.html>the first route</a></li><li data-nav-id=/tutorial/first-template/index.html><a class=padding href=/tutorial/first-template/index.html>the first template</a></li><li data-nav-id=/tutorial/first-path-parameter/index.html><a class=padding href=/tutorial/first-path-parameter/index.html>the first path parameter</a></li><li data-nav-id=/tutorial/first-url-parameters/index.html><a class=padding href=/tutorial/first-url-parameters/index.html>the first URL parameter</a></li><li data-nav-id=/tutorial/first-form/index.html><a class=padding href=/tutorial/first-form/index.html>the first form</a></li><li data-nav-id=/tutorial/first-bonus-css/index.html><a class=padding href=/tutorial/first-bonus-css/index.html>Bonus: pimp your CSS</a></li><li data-nav-id=/tutorial/first-build/index.html><a class=padding href=/tutorial/first-build/index.html>the first build</a></li></ul></li><li class=parent data-nav-id=/building-blocks/index.html><input type=checkbox id=R-section-677e78e4818ce1699969152db5d5854b aria-controls=R-subsections-677e78e4818ce1699969152db5d5854b checked><label for=R-section-677e78e4818ce1699969152db5d5854b><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Building blocks</span></label><a class=padding href=/building-blocks/index.html>Building blocks</a><ul id=R-subsections-677e78e4818ce1699969152db5d5854b class=collapsible-menu><li data-nav-id=/building-blocks/simple-web-server/index.html><a class=padding href=/building-blocks/simple-web-server/index.html>Simple web server</a></li><li data-nav-id=/building-blocks/static/index.html><a class=padding href=/building-blocks/static/index.html>Static assets</a></li><li class=active data-nav-id=/building-blocks/routing/index.html><a class=padding href=/building-blocks/routing/index.html>Routes and URL parameters</a></li><li data-nav-id=/building-blocks/templates/index.html><a class=padding href=/building-blocks/templates/index.html>Templates</a></li><li data-nav-id=/building-blocks/session/index.html><a class=padding href=/building-blocks/session/index.html>Sessions</a></li><li data-nav-id=/building-blocks/headers/index.html><a class=padding href=/building-blocks/headers/index.html>Headers</a></li><li data-nav-id=/building-blocks/errors-interactivity/index.html><a class=padding href=/building-blocks/errors-interactivity/index.html>Errors and interactivity</a></li><li data-nav-id=/building-blocks/database/index.html><a class=padding href=/building-blocks/database/index.html>Connecting to a database</a></li><li data-nav-id=/building-blocks/user-log-in/index.html><a class=padding href=/building-blocks/user-log-in/index.html>User log-in</a></li><li data-nav-id=/building-blocks/users-and-passwords/index.html><a class=padding href=/building-blocks/users-and-passwords/index.html>Users and passwords</a></li><li data-nav-id=/building-blocks/form-validation/index.html><a class=padding href=/building-blocks/form-validation/index.html>Form validation</a></li><li data-nav-id=/building-blocks/building-binaries/index.html><a class=padding href=/building-blocks/building-binaries/index.html>Running and Building</a></li><li data-nav-id=/building-blocks/deployment/index.html><a class=padding href=/building-blocks/deployment/index.html>Deployment</a></li><li data-nav-id=/building-blocks/remote-debugging/index.html><a class=padding href=/building-blocks/remote-debugging/index.html>Remote debugging</a></li><li data-nav-id=/building-blocks/electron/index.html><a class=padding href=/building-blocks/electron/index.html>Electron</a></li><li data-nav-id=/building-blocks/web-views/index.html><a class=padding href=/building-blocks/web-views/index.html>Web views: cross-platform GUIs</a></li></ul></li><li data-nav-id=/isomorphic-web-frameworks/index.html><input type=checkbox id=R-section-652e7241431d27ef0fbd324cbff58c2a aria-controls=R-subsections-652e7241431d27ef0fbd324cbff58c2a><label for=R-section-652e7241431d27ef0fbd324cbff58c2a><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Isomorphic web frameworks</span></label><a class=padding href=/isomorphic-web-frameworks/index.html>Isomorphic web frameworks</a><ul id=R-subsections-652e7241431d27ef0fbd324cbff58c2a class=collapsible-menu><li data-nav-id=/isomorphic-web-frameworks/weblocks/index.html><a class=padding href=/isomorphic-web-frameworks/weblocks/index.html>Reblocks</a></li><li data-nav-id=/isomorphic-web-frameworks/clog/index.html><a class=padding href=/isomorphic-web-frameworks/clog/index.html>CLOG</a></li></ul></li><li data-nav-id=/see-also/index.html><a class=padding href=/see-also/index.html>See also</a></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div><div id=R-menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"><div id=R-prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks"><ul><li id=R-select-language-container class=footerLangSwitch><div class="padding menu-control"><i class="fa-fw fas fa-language"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-language>Language</label>
<select id=R-select-language onchange="location=this.querySelector(this.value).dataset.url"><option id=R-select-language-en value=#R-select-language-en data-url=/building-blocks/routing/index.html lang=en-us selected></option></select></div><div class=clear></div></div></li><li id=R-select-variant-container class=footerVariantSwitch><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=R-select-variant-auto value=auto selected>Auto</option></select></div><div class=clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><div class="padding menu-control"><i class="fa-fw fas fa-history"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Clear History</button></div><div class=clear></div></div></li></ul></div><div id=R-footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></div></aside><script src=/js/clipboard.min.js?1736462513 defer></script><script src=/js/perfect-scrollbar.min.js?1736462513 defer></script><script src=/js/theme.js?1736462513 defer></script></body></html>