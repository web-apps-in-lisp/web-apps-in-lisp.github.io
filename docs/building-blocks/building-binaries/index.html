<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.136.0"><meta name=generator content="Relearn 7.0.1+72a875f1db967152c77914cff4d53f8fcee0e619"><meta name=description content="Running the application from source Info See the tutorial.
To run our Lisp code from source, as a script, we can use the --load switch from our implementation.
We must ensure:
to load the projectâ€™s .asd system declaration (if any) to install the required dependencies (this demands we have installed Quicklisp previously) and to run our applicationâ€™s entry point. So, the recipe to run our project from sources can look like this (you can find such a recipe in our project generator):"><meta name=author content="vindarel"><meta name=twitter:card content="summary"><meta name=twitter:title content="Running and Building :: Web Apps in Lisp: Know-how"><meta name=twitter:description content="Running the application from source Info See the tutorial.
To run our Lisp code from source, as a script, we can use the --load switch from our implementation.
We must ensure:
to load the projectâ€™s .asd system declaration (if any) to install the required dependencies (this demands we have installed Quicklisp previously) and to run our applicationâ€™s entry point. So, the recipe to run our project from sources can look like this (you can find such a recipe in our project generator):"><meta property="og:url" content="http://example.org/building-blocks/building-binaries/index.html"><meta property="og:site_name" content="Web Apps in Lisp: Know-how"><meta property="og:title" content="Running and Building :: Web Apps in Lisp: Know-how"><meta property="og:description" content="Running the application from source Info See the tutorial.
To run our Lisp code from source, as a script, we can use the --load switch from our implementation.
We must ensure:
to load the projectâ€™s .asd system declaration (if any) to install the required dependencies (this demands we have installed Quicklisp previously) and to run our applicationâ€™s entry point. So, the recipe to run our project from sources can look like this (you can find such a recipe in our project generator):"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Building blocks"><meta itemprop=name content="Running and Building :: Web Apps in Lisp: Know-how"><meta itemprop=description content="Running the application from source Info See the tutorial.
To run our Lisp code from source, as a script, we can use the --load switch from our implementation.
We must ensure:
to load the projectâ€™s .asd system declaration (if any) to install the required dependencies (this demands we have installed Quicklisp previously) and to run our applicationâ€™s entry point. So, the recipe to run our project from sources can look like this (you can find such a recipe in our project generator):"><meta itemprop=wordCount content="364"><title>Running and Building :: Web Apps in Lisp: Know-how</title>
<link href=/building-blocks/building-binaries/index.xml rel=alternate type=application/rss+xml title="Running and Building :: Web Apps in Lisp: Know-how"><link href=/css/fontawesome-all.min.css?1736439836 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css?1736439836 rel=stylesheet></noscript><link href=/css/nucleus.css?1736439836 rel=stylesheet><link href=/css/auto-complete.css?1736439836 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/auto-complete.css?1736439836 rel=stylesheet></noscript><link href=/css/perfect-scrollbar.min.css?1736439836 rel=stylesheet><link href=/css/fonts.css?1736439836 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css?1736439836 rel=stylesheet></noscript><link href=/css/theme.css?1736439836 rel=stylesheet><link href=/css/theme-auto.css?1736439836 rel=stylesheet id=R-variant-style><link href=/css/chroma-auto.css?1736439836 rel=stylesheet id=R-variant-chroma-style><link href=/css/print.css?1736439836 rel=stylesheet media=print><script src=/js/variant.js?1736439836></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="http://example.org",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.variants&&variants.init(["auto"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script></head><body class="mobile-support html" data-url=/building-blocks/building-binaries/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#running-the-application-from-source>Running the application from source</a></li><li><a href=#building-a-self-contained-executable>Building a self-contained executable</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/building-blocks/index.html><span itemprop=name>Building blocks</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Running and Building</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/building-blocks/form-validation/index.html title="Form validation (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/building-blocks/deployment/index.html title="Deployment (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable building-blocks" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=running-and-building>Running and Building</h1><h2 id=running-the-application-from-source>Running the application from source</h2><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>See the tutorial.</p></div></div><p>To run our Lisp code from source, as a script, we can use the <code>--load</code>
switch from our implementation.</p><p>We must ensure:</p><ul><li>to load the project&rsquo;s .asd system declaration (if any)</li><li>to install the required dependencies (this demands we have installed Quicklisp previously)</li><li>and to run our application&rsquo;s entry point.</li></ul><p>So, the recipe to run our project from sources can look like this (you can find such a recipe in our project generator):</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span><span style=color:#75715e>;; run.lisp</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>load</span> <span style=color:#e6db74>&#34;myproject.asd&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(ql:quickload <span style=color:#e6db74>&#34;myproject&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(in-package <span style=color:#e6db74>:myproject</span>)
</span></span><span style=display:flex><span>(handler-case
</span></span><span style=display:flex><span>    (myproject::start-app <span style=color:#e6db74>:port</span> (ignore-errors (<span style=color:#a6e22e>parse-integer</span> (uiop:getenv <span style=color:#e6db74>&#34;PROJECT_PORT&#34;</span>))))
</span></span><span style=display:flex><span>  (<span style=color:#66d9ef>error</span> (c)
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>format</span> *error-output* <span style=color:#e6db74>&#34;~&amp;An error occured: ~a~&amp;&#34;</span> c)
</span></span><span style=display:flex><span>    (uiop:quit <span style=color:#ae81ff>1</span>)))</span></span></code></pre></div><p>In addition we have allowed the user to set the application&rsquo;s port
with an environment variable.</p><p>We can run the file like so:</p><pre><code>sbcl --load run.lisp
</code></pre><p>After loading the project, the web server is started in the
background. We are offered the usual Lisp REPL, from which we can
interact with the running application.</p><p>We can also connect to the running application from our preferred
editor, from home, and compile the changes in our editor to the
running instance. See the following section:
<a href=https://lispcookbook.github.io/cl-cookbook/debugging.html#remote-debugging rel=external target=_blank>connecting to a remote lisp image</a> on the Cookbook.</p><h2 id=building-a-self-contained-executable>Building a self-contained executable</h2><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>See the tutorial.</p></div></div><p>As for all Common Lisp applications, we can bundle our web app in one
single executable, including the assets. It makes deployment very
easy: copy it to your server and run it.</p><div class="highlight wrap-code"><pre tabindex=0><code>$ ./my-web-app
Hunchentoot server is started.
Listening on localhost:9003.</code></pre></div><p>See this recipe on <a href=scripting.html#for-web-apps>scripting#for-web-apps</a>.</p><p>As for any executable, you need this in your .asd file:</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span><span style=color:#e6db74>:build-operation</span> <span style=color:#e6db74>&#34;program-op&#34;</span> <span style=color:#75715e>;; leave as is</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>:build-pathname</span> <span style=color:#e6db74>&#34;&lt;binary-name&gt;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>:entry-point</span> <span style=color:#e6db74>&#34;&lt;my-package:main-function&gt;&#34;</span></span></span></code></pre></div><p>and you build the binary with <code>(asdf:make :myproject)</code>.</p><p>However, you might find that as soon as you start your app, its
stops. That happens because the server thread is started in the background, and nothing tells the binary to wait for it. We can simply sleep (for a large-enough amount of time).</p><div class="highlight wrap-code"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(defun main ()
</span></span><span style=display:flex><span>  (start-app <span style=color:#e6db74>:port</span> <span style=color:#ae81ff>9003</span>) <span style=color:#75715e>;; our start-app</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; keep the binary busy in the foreground, for binaries and SystemD.</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>sleep</span> most-positive-fixnum))</span></span></code></pre></div><p>If you want to learn more, seeâ€¦ <a href=https://lispcookbook.github.io/cl-cookbook/scripting.html rel=external target=_blank>the Cookbook: scripting, command line arguments, executables</a>.</p><footer class=footline><hr><footer style=text-align:right;font-size:.8rem><div>A motivated Lisper, 2022-present. <a href=https://github.com/sponsors/vindarel/>Show your love!</a> â™¥</div><div><a href="https://www.udemy.com/course/common-lisp-programming/?referralCode=2F3D698BBC4326F94358">Learn Common Lisp efficiently in videos</a> ðŸŽ¥</div><script async defer data-domain=web-apps-in-lisp.github.io src=https://stats.documents.design/js/plausible.js></script></footer></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><style>#logo svg,#logo svg *{color:#282828;color:var(--MENU-SECTIONS-BG-color);fill:#282828!important;fill:var(--MENU-SECTIONS-BG-color)!important;opacity:.945}a#logo{color:#282828;color:var(--MENU-SECTIONS-BG-color);font-family:work sans,helvetica,tahoma,geneva,arial,sans-serif;font-size:30px;font-weight:300;margin-top:-13px;max-width:60%;text-transform:uppercase;width:226px;white-space:nowrap}a#logo:hover{color:#282828;color:var(--MENU-SECTIONS-BG-color)}#logo svg{margin-bottom:-20px;margin-left:-23.5px;width:40.5%}@media only all and (max-width:59.938em){a#logo{font-size:25px;margin-top:-3px}#logo svg{margin-bottom:-12px;margin-left:-23px}}@media all and (-ms-high-contrast:none){a#logo{margin-top:-58px}#logo svg{margin-bottom:-62px}}</style><a id=logo href=/>ðŸš€</a></div><script>window.index_js_url="/searchindex.js?1736439836"</script><search><form action=/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search><script>var contentLangs=["en"]</script><script src=/js/auto-complete.js?1736439836 defer></script><script src=/js/lunr/lunr.min.js?1736439836 defer></script><script src=/js/lunr/lunr.stemmer.support.min.js?1736439836 defer></script><script src=/js/lunr/lunr.multi.min.js?1736439836 defer></script><script src=/js/lunr/lunr.en.min.js?1736439836 defer></script><script src=/js/search.js?1736439836 defer></script></div><div id=R-homelinks class="default-animation homelinks"><ul><li><a class=padding href=/index.html><i class="fa-fw fas fa-home"></i> Home</a></li></ul><hr class=padding></div><div id=R-content-wrapper class=highlightable><div id=R-topics><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/tutorial/index.html><input type=checkbox id=R-section-5816d3986a56e91688f1baee8cddaed6 aria-controls=R-subsections-5816d3986a56e91688f1baee8cddaed6><label for=R-section-5816d3986a56e91688f1baee8cddaed6><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Tutorial part 1</span></label><a class=padding href=/tutorial/index.html>Tutorial part 1</a><ul id=R-subsections-5816d3986a56e91688f1baee8cddaed6 class=collapsible-menu><li data-nav-id=/tutorial/getting-started/index.html><a class=padding href=/tutorial/getting-started/index.html>Getting Started</a></li><li data-nav-id=/tutorial/first-route/index.html><a class=padding href=/tutorial/first-route/index.html>the first route</a></li><li data-nav-id=/tutorial/first-template/index.html><a class=padding href=/tutorial/first-template/index.html>the first template</a></li><li data-nav-id=/tutorial/first-path-parameter/index.html><a class=padding href=/tutorial/first-path-parameter/index.html>the first path parameter</a></li><li data-nav-id=/tutorial/first-url-parameters/index.html><a class=padding href=/tutorial/first-url-parameters/index.html>the first URL parameter</a></li><li data-nav-id=/tutorial/first-form/index.html><a class=padding href=/tutorial/first-form/index.html>the first form</a></li><li data-nav-id=/tutorial/first-bonus-css/index.html><a class=padding href=/tutorial/first-bonus-css/index.html>Bonus: pimp your CSS</a></li><li data-nav-id=/tutorial/first-build/index.html><a class=padding href=/tutorial/first-build/index.html>the first build</a></li></ul></li><li class=parent data-nav-id=/building-blocks/index.html><input type=checkbox id=R-section-677e78e4818ce1699969152db5d5854b aria-controls=R-subsections-677e78e4818ce1699969152db5d5854b checked><label for=R-section-677e78e4818ce1699969152db5d5854b><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Building blocks</span></label><a class=padding href=/building-blocks/index.html>Building blocks</a><ul id=R-subsections-677e78e4818ce1699969152db5d5854b class=collapsible-menu><li data-nav-id=/building-blocks/simple-web-server/index.html><a class=padding href=/building-blocks/simple-web-server/index.html>Simple web server</a></li><li data-nav-id=/building-blocks/static/index.html><a class=padding href=/building-blocks/static/index.html>Static assets</a></li><li data-nav-id=/building-blocks/routing/index.html><a class=padding href=/building-blocks/routing/index.html>Routes and URL parameters</a></li><li data-nav-id=/building-blocks/templates/index.html><a class=padding href=/building-blocks/templates/index.html>Templates</a></li><li data-nav-id=/building-blocks/session/index.html><a class=padding href=/building-blocks/session/index.html>Sessions</a></li><li data-nav-id=/building-blocks/headers/index.html><a class=padding href=/building-blocks/headers/index.html>Headers</a></li><li data-nav-id=/building-blocks/errors-interactivity/index.html><a class=padding href=/building-blocks/errors-interactivity/index.html>Errors and interactivity</a></li><li data-nav-id=/building-blocks/database/index.html><a class=padding href=/building-blocks/database/index.html>Connecting to a database</a></li><li data-nav-id=/building-blocks/user-log-in/index.html><a class=padding href=/building-blocks/user-log-in/index.html>User log-in</a></li><li data-nav-id=/building-blocks/users-and-passwords/index.html><a class=padding href=/building-blocks/users-and-passwords/index.html>Users and passwords</a></li><li data-nav-id=/building-blocks/form-validation/index.html><a class=padding href=/building-blocks/form-validation/index.html>Form validation</a></li><li class=active data-nav-id=/building-blocks/building-binaries/index.html><a class=padding href=/building-blocks/building-binaries/index.html>Running and Building</a></li><li data-nav-id=/building-blocks/deployment/index.html><a class=padding href=/building-blocks/deployment/index.html>Deployment</a></li><li data-nav-id=/building-blocks/remote-debugging/index.html><a class=padding href=/building-blocks/remote-debugging/index.html>Remote debugging</a></li><li data-nav-id=/building-blocks/electron/index.html><a class=padding href=/building-blocks/electron/index.html>Electron</a></li><li data-nav-id=/building-blocks/web-views/index.html><a class=padding href=/building-blocks/web-views/index.html>Web views: cross-platform GUIs</a></li></ul></li><li data-nav-id=/isomorphic-web-frameworks/index.html><input type=checkbox id=R-section-652e7241431d27ef0fbd324cbff58c2a aria-controls=R-subsections-652e7241431d27ef0fbd324cbff58c2a><label for=R-section-652e7241431d27ef0fbd324cbff58c2a><i class="fa-fw fas fa-chevron-down"></i><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Isomorphic web frameworks</span></label><a class=padding href=/isomorphic-web-frameworks/index.html>Isomorphic web frameworks</a><ul id=R-subsections-652e7241431d27ef0fbd324cbff58c2a class=collapsible-menu><li data-nav-id=/isomorphic-web-frameworks/weblocks/index.html><a class=padding href=/isomorphic-web-frameworks/weblocks/index.html>Weblocks</a></li><li data-nav-id=/isomorphic-web-frameworks/clog/index.html><a class=padding href=/isomorphic-web-frameworks/clog/index.html>CLOG</a></li></ul></li><li data-nav-id=/see-also/index.html><a class=padding href=/see-also/index.html>See also</a></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div><div id=R-menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"><div id=R-prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks"><ul><li id=R-select-language-container class=footerLangSwitch><div class="padding menu-control"><i class="fa-fw fas fa-language"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-language>Language</label>
<select id=R-select-language onchange="location=this.querySelector(this.value).dataset.url"><option id=R-select-language-en value=#R-select-language-en data-url=/building-blocks/building-binaries/index.html lang=en-us selected></option></select></div><div class=clear></div></div></li><li id=R-select-variant-container class=footerVariantSwitch><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=R-select-variant-auto value=auto selected>Auto</option></select></div><div class=clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><div class="padding menu-control"><i class="fa-fw fas fa-history"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Clear History</button></div><div class=clear></div></div></li></ul></div><div id=R-footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></div></aside><script src=/js/clipboard.min.js?1736439836 defer></script><script src=/js/perfect-scrollbar.min.js?1736439836 defer></script><script src=/js/theme.js?1736439836 defer></script></body></html>